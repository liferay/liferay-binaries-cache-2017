{"version":3,"sources":["unused.js"],"names":["disposeUnused","schedule","comps_","disposing_","i","length","comp","isDisposed","parent","element","dispose","comps","push"],"mappings":";AAAA;;;;;SAWgBA,a,GAAAA,a;SAwBAC,Q,GAAAA,Q;;;AA/BhB,KAAIC,SAAS,EAAb;AACA,KAAIC,aAAa,KAAjB;;AAEA;;;;AAIO,UAASH,aAAT,GAAyB;AAC/B,MAAIG,UAAJ,EAAgB;AACf;AACA;AACDA,eAAa,IAAb;;AAEA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,OAAOG,MAA3B,EAAmCD,GAAnC,EAAwC;AACvC,OAAME,OAAOJ,OAAOE,CAAP,CAAb;AACA,OAAI,CAACE,KAAKC,UAAL,EAAD,IAAsB,CAAC,mBAAQD,IAAR,EAAcE,MAAzC,EAAiD;AAChD;AACA;AACAF,SAAKG,OAAL,GAAe,IAAf;AACAH,SAAKI,OAAL;AACA;AACD;AACDR,WAAS,EAAT;AACAC,eAAa,KAAb;AACA;;AAED;;;;;AAKO,UAASF,QAAT,CAAkBU,KAAlB,EAAyB;AAC/B,OAAK,IAAIP,IAAI,CAAb,EAAgBA,IAAIO,MAAMN,MAA1B,EAAkCD,GAAlC,EAAuC;AACtC,OAAI,CAACO,MAAMP,CAAN,EAASG,UAAT,EAAL,EAA4B;AAC3B,uBAAQI,MAAMP,CAAN,CAAR,EAAkBI,MAAlB,GAA2B,IAA3B;AACAN,WAAOU,IAAP,CAAYD,MAAMP,CAAN,CAAZ;AACA;AACD;AACD","file":"node_modules/metal-incremental-dom/src/cleanup/unused.js","sourcesContent":["'use strict';\n\nimport { getData } from '../data';\n\nlet comps_ = [];\nlet disposing_ = false;\n\n/**\n * Disposes all sub components that were not rerendered since the last\n * time this function was scheduled.\n */\nexport function disposeUnused() {\n\tif (disposing_) {\n\t\treturn;\n\t}\n\tdisposing_ = true;\n\n\tfor (let i = 0; i < comps_.length; i++) {\n\t\tconst comp = comps_[i];\n\t\tif (!comp.isDisposed() && !getData(comp).parent) {\n\t\t\t// Don't let disposing cause the element to be removed, since it may\n\t\t\t// be currently being reused by another component.\n\t\t\tcomp.element = null;\n\t\t\tcomp.dispose();\n\t\t}\n\t}\n\tcomps_ = [];\n\tdisposing_ = false;\n}\n\n/**\n * Schedules the given components to be checked and disposed if not used\n * anymore when `disposeUnused` is called.\n * @param {!Array<!Component>} comps\n */\nexport function schedule(comps) {\n\tfor (let i = 0; i < comps.length; i++) {\n\t\tif (!comps[i].isDisposed()) {\n\t\t\tgetData(comps[i]).parent = null;\n\t\t\tcomps_.push(comps[i]);\n\t\t}\n\t}\n}\n"],"sourceRoot":"/source/"}